<!-- #BeginTemplate "/Templates/manual-page.dwt" --><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<!-- #TemplateBeginEditable name="doctitle" -->
		<title>Unity - Setting up the Asset Server</title>
	<!-- #TemplateEndEditable -->
</head>
<link rel="StyleSheet"  href="../Images/docs.css" type="text/css" />
<body>
<table class="titlebar" cellpadding=0 cellspacing=0 border=0><tr>
	<td class="titleleft"><img src="../images/top/left.png"></td>
	<td><a href="../../Documentation.html"><img src="../images/top/logo.png"></a></td>
	<td class="titlemid">
		<table><tr>
			<td class="doctitle">Setting up the Asset Server</td>
			<td class="Components" align="right"><a href="../Manual/index.html" title="Go to Unity manual"><img src="../images/spacer.gif" width="72" height="36" class="manual" border="0"></a></td>
			<td class="Components" width="94"><a href="../Components/index.html" title="Go to Reference"><img src="../images/spacer.gif" width="94" height="36" class="reference" border="0"></a></td>
			<td class="Components" width="82"><a href="../ScriptReference/index.html" title="Go to Scripting Reference"><img src="../images/spacer.gif" width="82" height="36" class="scripting" border="0"></a></td>
		</tr><tr>
			<td colspan="4">
				<table width="100%" class="docpath"><tr><td >
		<!-- #TemplateBeginEditable name="path" -->
					<a href="../Components/index.html">Reference Manual</a> &gt; <a href="../Components/Asset Server Guide.html">Asset Server Guide</a> &gt; <a href="../Components/assetserver-Setup.html">Setting up the Asset Server</a>
		<!-- #TemplateEndEditable -->	
				</td>
				</td><td class="switchlink">
					<!--BeginSwitchLink--><!--EndSwitchLink-->
				</td></tr></table>
			</td>
		</tr></table>
	</td>
	<td class="titleright" width="9"><img src="../images/top/right.png"></td>
</tr></table>
<div class="manual">
	<div class="main">

		<!-- #TemplateBeginEditable name="navigation" -->
		<div class="nav">
		<div class="nav-prev">
			<a href='../Components/Asset Server Guide.html'>
				<div class="nav-left"></div>
				<div class="nav-main">Previous</div>
				<div class="nav-right"></div>
			</a>
		</div>
	
		<div class="nav-next">
			<a href='../Components/assetserver-DailyUse.html'>
				<div class="nav-left"></div>
				<div class="nav-main">Next</div>
				<div class="nav-right"></div>
			</a>
		</div>
	</div>
		<!-- #TemplateEndEditable -->	
		<!-- #TemplateBeginEditable name="title" -->
			<h1>Setting up the Asset Server</h1>
		<!-- #TemplateEndEditable -->	
		<!-- #TemplateBeginEditable name="body" -->
			
<h2>Server-side Installation</h2>
<p>The Asset Server is designed to be a simple one-time installation on a server machine.  Interacting with the Asset Server is done through Unity.  Unity can be installed on the server machine, but it does not need to be. It must be administrated from a Client machine, where Projects and Users can be added. Each additional client must be configured to synchronize with a Project, using a specific User credential.
</p>
<p class='vspace'>You can install the Asset Server on any Mac OS X machine or on Linux.
<a class='urllink' href='http://www.unity3d.com/asset-server' rel='nofollow'>Download Unity Asset Server</a> 
</p>
<p class='vspace'>The installer will install all necessary files, setup a database and launch the Asset Server. At the end of the process you will be asked for an <span class='doc-keyword'>Admin password</span>. This password is required to administer the Asset Server from within Unity.  You must connect to the Asset Server as the administrator before you can create any projects or users.
</p>
<div class='vspace'></div><h2>Administrating the Asset Server</h2>
<p>The Asset Server allows any number of <span class='doc-keyword'>Users</span> to connect to a <span class='doc-keyword'>Project</span>.  The Administrator must first connect to the Server with Unity as a client and create new Projects and Users.
</p>
<p class='vspace'>To access the Administrator controls, launch Unity and select <span class='doc-menu'>Window-&gt;Asset Server</span>, then click the <span class='doc-menu'>Server Administration</span> button.
</p>
<div class='vspace'></div><div><img class='figure' src='../Images/manual/assetserver-Setup-0.jpg' /><br /><em>The <span class='doc-keyword'>Administration</span> tab</em></div>
<p class='vspace'>In the <span class='doc-prop'>Server Address</span> field, enter either the <span class='doc-keyword'>ip address</span> or <span class='doc-keyword'>host name</span> of the computer running the Asset Server that you want to administer.  If the Asset Server is installed on your local machine, you can use "localhost" as the <span class='doc-prop'>Server Address</span>. Next, provide the administrator name and password. The administrator name is always "admin", and the password is what was entered when installing the Asset Server. Finally, hit the <span class='doc-menu'>Connect</span> button.  You're now connected to the Asset Server, and can perform the initial setup.
</p>
<div class='vspace'></div><h3>Creating a new Project and adding Users</h3>
<p>Each Server can contain several Projects, and each User can have permission to one or more Projects.  Projects are generally orthogonal, and unique in asset collections.  It is best to think "one Project equals one game".
</p>
<p class='vspace'>New Projects can be created by clicking on the <span class='doc-menu'>Create</span> button in the <span class='doc-keyword'>Server Administration</span> tab. 
</p>
<div class='vspace'></div><div><img class='figure' src='../Images/manual/assetserver-Setup-1.jpg' /><br /><em>Click Create, then enter a name for the new project</em></div>
<p class='vspace'>New users can be created by first selecting an existing project and then clicking on the <span class='doc-menu'>New User</span> button. 
</p>
<div class='vspace'></div><div><img class='figure' src='../Images/manual/assetserver-Setup-2.jpg' /><br /><em>Creating a new user</em></div>
<p class='vspace'>After a user has been created in one Project, the user can be added to another project by enabling the checkbox on the left of the user name in the users list.
</p>
<div class='vspace'></div><h2>Asset Server Client Setup</h2>
<p>Once you have been provided a Project and User account, you can synchronize your local Project with any server Project.  You will have to establish a connection with the server initially, and you can only be connected to one project at any given time.  Every time you want to change server or project, you will need to follow this process.
</p>
<div class='vspace'></div><h3>Establishing a Client Connection</h3>
<p>Every client must connect to the machine running the Asset Server.  To access the <span class='doc-keyword'>Connection Settings</span> dialog, click the  <span class='doc-menu'>Connection</span> button from the <span class='doc-keyword'>Overview</span> tab.
</p>
<div class='vspace'></div><div><img class='figure' src='../Images/manual/assetserver-Setup-3.jpg' /><br /><em>The <span class='doc-keyword'>Connection</span> tab</em></div>
<p class='vspace'>Here, enter a new server address in the <span class='doc-menu'>Server</span> field, or choose a previously entered server from the dropdown.  Provide your user credentials, and click the <span class='doc-menu'>Show Projects</span> button.  Select the Project from the list that appears on the right, and click <span class='doc-menu'>Connect</span>.  Alternatively, if you know the project name you can enter it directly in the <span class='doc-menu'>Project Name</span> field and click <span class='doc-menu'>Connect</span>.
</p>
<div class='vspace'></div><h3>Firewall settings</h3>
<p>The Unity Asset Server uses TCP port <span class='doc-keyword'>10733</span>. You might need to enable connections to this port in your firewall and/or router.
</p>
<div class='vspace'></div><h2>Advanced</h2>
<p>The Asset Server is built using a modified version of <span class='wikiword'>PostgreSQL</span>.  Accessing the SQL database directly requires a bit of technical knowledge about SQL and Unix/Linux command lines.  User discretion is advised.
</p>
<div class='vspace'></div><h3>Accessing the Asset Server Database</h3>
<p>To view the tables in a Project database, first you need to figure out the name of the actual database. Run this command line command on the machine hosting the Asset Server:
</p>
<p class='vspace'>Mac OS X<br /><code>/<span class='wikiword'>Library/UnityAssetServer</span>/bin/psql -U admin -h localhost -d postgres -c 'select * from all_databases__view'</code>
</p>
<p class='vspace'>Linux<br /><code>/opt/unity_asset_server/bin/psql -U admin -h localhost -d postgres -c 'select * from all_databases__view'</code>
</p>
<p class='vspace'>Windows<br /><code>"%<span class='wikiword'>ProgramFiles</span>%\Unity\<span class='wikiword'>AssetServer</span>\bin\psql.exe" -U admin -h localhost -d postgres -c "select * from all_databases__view"</code>
</p>
<p class='vspace'>This and other commands will prompt you for a password.  Every time this happens, enter the admin password for the database, which was set during the installation.  The result will be a table that follows this basic layout:
</p>
<div class='vspace'></div><pre class='codelisting'>
    databasename    |    projectname     |       description        | version 
--------------------+--------------------+--------------------------+---------
 sandbox            | Sandbox            | Created with Unity 2.0.0 | 1.0
 game               | Game               | Created with Unity 2.0.0 | 1.0
 my_game_project    | My Game Project    | Created with Unity 2.0.0 | 1.0
(3 rows)
</pre>
<p class='vspace'>Now you need to identify the "databasename" of the Project you want to back up. When creating a database, the default "databasename" is same as the "projectname" as shown inside Unity, but in lowercase and spaces replaced with underscores.
</p>
<div class='vspace'></div><h3>Backing up</h3>
<p>To create a backup of an Asset Server database, run the following command, replacing DATABASENAME with the name of the desired database, pulled from your "databasename" list produced earlier.
</p>
<p class='vspace'>Mac OS X<br /><code>/<span class='wikiword'>Library/UnityAssetServer</span>/bin/pg_dump -U admin -h localhost </code>DATABASENAME<code> -bo -F c &gt; </code>DATABASENAME<code>.pgdump</code>
</p>
<p class='vspace'>Linux<br /><code>/opt/unity_asset_server/bin/pg_dump -U admin -h localhost </code>DATABASENAME<code> -bo -F c &gt; </code>DATABASENAME<code>.pgdump</code>
</p>
<p class='vspace'>Windows<br /><code>"%<span class='wikiword'>ProgramFiles</span>%\Unity\<span class='wikiword'>AssetServer</span>\bin\pg_dump.exe" -U admin -h localhost -bo -F t -f </code>DATABASENAME<code>.pgdump </code>DATABASENAME<code></code>
</p>
<div class='vspace'></div><h3>Restoring a Backup</h3>
<p>To restore a backup of an Asset Server database, run the following command, replacing DATABASENAME with the name of the desired database, pulled from your "databasename" list produced earlier.
</p>
<p class='vspace'>Mac OS X<br /><code>/<span class='wikiword'>Library/UnityAssetServer</span>/bin/pg_restore -U admin -h localhost -c -F c -d </code>DATABASENAME<code> &lt; </code>DATABASENAME<code>.pgdump</code>
</p>
<p class='vspace'>Linux<br /><code>/opt/unity_asset_server/bin/pg_restore -U admin -h localhost -c -F c -d </code>DATABASENAME<code> &lt; </code>DATABASENAME<code>.pgdump</code>
</p>
<p class='vspace'>Windows<br /><code>"%<span class='wikiword'>ProgramFiles</span>%\Unity\<span class='wikiword'>AssetServer</span>\bin\pg_restore.exe" -U admin -h localhost -c -F t -d </code>DATABASENAME<code> </code>DATABASENAME<code>.pgdump</code>
</p>
<p class='vspace'>If you are restoring to a new database that doesn't exist yet, you should create a new Project first inside the <span class='doc-menu'>Asset Server Administration</span> dialog, then restore to this empty database. This is a much preferred way than using the <code>-C</code> option.
</p>
<div class='vspace'></div><h3>Deleting a Database</h3>
<p><b>Note:</b> You cannot undo this command, so it is recommended that you have a backup first.
</p>
<p class='vspace'>To delete an Asset Server database including all data, run the following command, replacing DATABASENAME with the name of the desired database, pulled from your "databasename" list produced earlier.
</p>
<p class='vspace'>Mac OS X<br /><code>/<span class='wikiword'>Library/UnityAssetServer</span>/bin/dropdb -U admin -h localhost -d </code>DATABASENAME
</p>
<p class='vspace'>Linux<br /><code>/opt/unity_asset_server/bin/dropdb -U admin -h localhost -d </code>DATABASENAME
</p>
<p class='vspace'>Windows<br /><code>"%<span class='wikiword'>ProgramFiles</span>%\Unity\<span class='wikiword'>AssetServer</span>\bin\dropdb.exe" -U admin -h localhost </code>DATABASENAME
</p>
<div class='vspace'></div><h3>Deleting User Accounts</h3>
<p><b>Note:</b> Be careful not to remove any system accounts (such as <em>admin</em> or <em>unitysrv</em>) or you might render your Asset Server installation unusable.
</p>
<p class='vspace'>You can enable or disable user access for individual projects in the built-in administration tool, but to completely remove a user from the server, run the following command, replacing USERNAME with the user name of the user you want to remove.
</p>
<p class='vspace'>Mac OS X<br /><code>/<span class='wikiword'>Library/UnityAssetServer</span>/bin/dropuser -U admin -h localhost -d </code>USERNAME
</p>
<p class='vspace'>Linux<br /><code>/opt/unity_asset_server/bin/dropuser -U admin -h localhost -d </code> USERNAME
</p>
<p class='vspace'>Windows<br /><code>"%<span class='wikiword'>ProgramFiles</span>%\Unity\<span class='wikiword'>AssetServer</span>\bin\dropuser.exe" -U admin -h localhost </code>USERNAME
</p>
<div class='vspace'></div><h3>Additional SQL Functions</h3>
<p>These and all other commands use tools from the <span class='wikiword'>PostgreSQL</span> distribution. You can read more about these tools here: <a class='urllink' href='http://www.postgresql.org/docs/8.2/interactive/reference-client.html' rel='nofollow'>http://www.postgresql.org/docs/8.2/interactive/reference-client.html</a>
</p>

		<!-- #TemplateEndEditable -->	

		<div class="nav">
		<div class="nav-prev">
			<a href='../Components/Asset Server Guide.html'>
				<div class="nav-left"></div>
				<div class="nav-main">Previous</div>
				<div class="nav-right"></div>
			</a>
		</div>
	
		<div class="nav-next">
			<a href='../Components/assetserver-DailyUse.html'>
				<div class="nav-left"></div>
				<div class="nav-main">Next</div>
				<div class="nav-right"></div>
			</a>
		</div>
	</div>
	</div>
</div>
</body></html>
<!-- #EndTemplate -->
